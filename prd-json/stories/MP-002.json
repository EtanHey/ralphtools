{
  "id": "MP-002",
  "title": "Ralph loads modular contexts via --append-system-prompt-file",
  "description": "Implement the actual context loading in Ralph using Claude Code's --append-system-prompt-file flag. Ralph should concatenate relevant context files from ~/.claude/contexts/ at runtime and pass them to Claude. This completes what MP-001 started (which only created the files).",
  "acceptanceCriteria": [
    {
      "text": "Research: Confirm --append-system-prompt-file works with Claude CLI",
      "checked": true
    },
    {
      "text": "Create _ralph_build_context_file() function that concatenates context files",
      "checked": true
    },
    {
      "text": "Load ~/.claude/contexts/base.md always (core Ralph rules)",
      "checked": true
    },
    {
      "text": "Load story-type specific contexts: tech/*.md based on project detection",
      "checked": true
    },
    {
      "text": "Load workflow/ralph.md for Ralph-specific instructions",
      "checked": true
    },
    {
      "text": "Generate merged context to /tmp/ralph-context-$$.md",
      "checked": true
    },
    {
      "text": "Add --append-system-prompt-file to cli_cmd_arr (line ~3685)",
      "checked": true
    },
    {
      "text": "REMOVE ${brave_skill} injection from ralph.zsh (line ~3718)",
      "checked": true
    },
    {
      "text": "REMOVE ${ralph_agent_instructions} injection (line ~3719)",
      "checked": true
    },
    {
      "text": "Move RALPH GIT RULES override to ~/.claude/contexts/workflow/ralph.md",
      "checked": true
    },
    {
      "text": "Test: Ralph spawns with context loaded correctly",
      "checked": true
    },
    {
      "text": "Test: Context file is cleaned up after iteration",
      "checked": true
    },
    {
      "text": "Update config.json schema to allow context customization",
      "checked": true
    },
    {
      "text": "Document context loading in README",
      "checked": true
    },
    {
      "text": "Commit changes with message: feat/fix: [STORY-ID] description",
      "checked": true
    }
  ],
  "storyType": "MP",
  "priority": "high",
  "createdAt": "2026-01-24T01:30:00.000Z",
  "passes": true
}
