{
  "id": "BUG-023",
  "title": "Orphan processes not cleaned up on hard crash/kill",
  "description": "When Ralph is killed forcefully (Ctrl+C during infinite loop, terminal reset, etc.), the cleanup trap doesn't run, leaving orphan processes (fswatch, bun) running. These must be manually killed.\n\nPossible solutions:\n1. Track child PIDs in /tmp/ralph-pids-$$.txt and check on startup\n2. Use process groups for cleaner cleanup\n3. Add ralph-cleanup command to kill orphans\n4. Check for stale processes at startup and offer to kill them",
  "type": "bug",
  "priority": "medium",
  "storyPoints": 3,
  "status": "pending",
  "acceptanceCriteria": [
    {"text": "Track child process PIDs (fswatch, bun) in temp file", "checked": false},
    {"text": "On Ralph startup, check for orphan processes from previous runs", "checked": false},
    {"text": "Offer to kill orphan processes if found", "checked": false},
    {"text": "Add ralph-cleanup helper command", "checked": false},
    {"text": "=== DEBUGGING/LOGGING ===", "checked": false},
    {"text": "Add crash log to ~/.config/ralphtools/logs/crash-{timestamp}.log", "checked": false},
    {"text": "Log: last iteration, story, criteria, error message", "checked": false},
    {"text": "On startup, show recent crash info if available", "checked": false},
    {"text": "Add ralph-logs command to view recent logs", "checked": false},
    {"text": "=== TESTING ===", "checked": false},
    {"text": "Test: Force kill Ralph, verify orphans detected on restart", "checked": false},
    {"text": "Test: ralph-cleanup kills all Ralph-related processes", "checked": false},
    {"text": "Test: Crash log created on failure", "checked": false},
    {"text": "Run CodeRabbit review - must pass (or create BUG if unfixable)", "checked": false},
    {"text": "Commit: fix: BUG-023 handle orphan process cleanup and crash logging", "checked": false}
  ],
  "dependencies": [],
  "passes": false
}
